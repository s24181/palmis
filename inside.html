<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Palmis â€“ Virtual Tour</title>

  <!-- Icons / styles -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons/css/flag-icons.min.css">
  <link rel="stylesheet" href="assets/styles.css">

  <!-- A-Frame for 360Â° -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/logo/palmis-favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/logo/palmis-favicon-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/logo/palmis-apple-180.png">
  <meta name="theme-color" content="#000000">

  <style>
    html, body {
      height: 100%;
      margin: 0;
      overflow-x: hidden;
    }

    /* Full-height layout, header on top, footer bottom */
    body.inside-page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      background: #000;
    }

    /* Main area = everything between header and footer */
    main.inside-main {
      flex: 1;
      min-height: 0;
      display: flex;
    }

    /* Viewer fills the whole width & height of this main area */
    .vt-viewer {
      position: relative;
      width: 100vw;   /* <<< full viewport width, no side gaps */
      height: 100%;
      overflow: hidden;
      background: #000;
    }

    /* Panels stack on top of each other, one active */
    .vt-panels {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
    }

    .vt-panel {
      position: absolute;
      inset: 0;
      display: none;
    }

    .vt-panel.active {
      display: block;
    }

    /* 360Â° panel */
    .vt-360-wrap {
      position: absolute;
      inset: 0;
    }

    .vt-360-wrap a-scene {
      width: 100%;
      height: 100%;
    }

    /* Angle images */
    .vt-img-wrap {
      position: absolute;
      inset: 0;
      background: #000;
    }

    .vt-img-wrap img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;   /* same behaviour as hero image */
      display: block;
    }

    /* Tabs bar OVER the image, at the bottom */
    .vt-tabs {
      position: absolute;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
      padding: 6px 10px;
      background: rgba(0,0,0,0.55);
      border-radius: 999px;
      z-index: 30;
      backdrop-filter: blur(8px);
    }

    .vt-tab {
      border: none;
      padding: 6px 14px;
      border-radius: 999px;
      font-size: .8rem;
      cursor: pointer;
      background: rgba(255,255,255,0.08);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.2);
      white-space: nowrap;
    }

    .vt-tab.active {
      background: linear-gradient(90deg,var(--brand,#FCA384),var(--accent,#A93528));
      border-color: transparent;
    }

   .table-hotspot{
  position: absolute;
  width: 7%;
  height: 9%;
  transform: translate(-50%, -50%);
  border-radius: 8px;
  background: transparent;   /* ðŸ”¹ fully invisible */
  border: none;              /* ðŸ”¹ no dashed outline */
  cursor: pointer;
}


    .table-hotspot:hover {
      background: rgba(255,255,255,0.30);
    }

    /* Tip for 360 view */
    #fullview-tip {
      position: absolute;
      top: 12px;
      left: 50%;
      transform: translateX(-50%);
      padding: 6px 12px;
      background: rgba(0,0,0,0.55);
      color: white;
      font-size: 0.85rem;
      border-radius: 999px;
      z-index: 40;
      pointer-events: none;
      animation: fadeout 5s forwards;
    }

    @keyframes fadeout {
      0% { opacity: 1; }
      75% { opacity: 1; }
      100% { opacity: 0; }
    }

    @media (max-width: 768px) {
      .vt-tabs {
        bottom: 10px;
        padding: 4px 8px;
      }
      .vt-tab {
        font-size: 0.75rem;
        padding: 4px 10px;
      }
    }
  </style>
</head>

<body class="inside-page">

<header class="header">
  <div class="container">
    <a class="brand" href="index.html" aria-label="Palmis â€” Home">
      <img src="assets/logo/palmis-logo-cropped.jpg" alt="Palmis" class="logo">
    </a>

    <button class="nav-toggle" type="button" aria-label="Toggle navigation" aria-expanded="false">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="menu.html">Menu</a>
      <a href="inside.html" class="active">Virtual Tour</a>
      <a href="reserve.html">Reserve</a>

      <div class="lang-selector" id="lang">
        <button id="lang-btn" type="button" aria-haspopup="listbox" aria-expanded="false">
          <span id="lang-flag" class="fi fi-gb" aria-hidden="true"></span>
          <span id="lang-code">EN</span>
          <span aria-hidden="true">â–¾</span>
        </button>

        <ul id="lang-menu" role="listbox" tabindex="-1" hidden>
          <li role="option" data-lang="en" tabindex="0"><span class="fi fi-gb"></span> EN</li>
          <li role="option" data-lang="fr" tabindex="0"><span class="fi fi-fr"></span> FR</li>
          <li role="option" data-lang="pl" tabindex="0"><span class="fi fi-pl"></span> PL</li>
          <li role="option" data-lang="es" tabindex="0"><span class="fi fi-es"></span> ES</li>
        </ul>
      </div>
    </nav>
  </div>
</header>

<main class="inside-main">
  <!-- FULL-BLEED VIEWER -->
  <div class="vt-viewer">

    <div class="vt-panels">
      <!-- 360Â° VIEW -->
      <div class="vt-panel active" id="view-360">
        <div class="vt-360-wrap">
          <a-scene embedded cursor="rayOrigin: mouse" raycaster="objects: .clickable">
            <!-- Use your new 360 pano -->
            <a-sky src="assets/palmis-360.jpg" rotation="0 -90 0"></a-sky>

            <a-entity id="mainCamera"
                      camera
                      look-controls="pointerLockEnabled: true"
                      position="0 1.6 0"></a-entity>

            <!-- ONLY TABLE 5 CLICKABLE -->
            <a-entity id="table5-hotspot"
                      class="clickable"
                      geometry="primitive: plane; width: 0.6; height: 0.6"
                      material="opacity: 0; transparent: true"
                      position="0 1.1 -3"></a-entity>
          </a-scene>

          <div id="fullview-tip">
            Drag to look around. Click table 5 to reserve it.
          </div>
        </div>
      </div>

      <!-- ANGLE 1 â€” tables 1, 2, 6 -->
      <div class="vt-panel" id="view-angle1">
        <div class="vt-img-wrap">
          <img src="assets/angles/angle-1-tables-1-2-6.png"
               alt="Restaurant view with tables 1, 2 and 6">
          <button class="table-hotspot" data-table="1" style="top:60%; left:40%;"></button>
          <button class="table-hotspot" data-table="2" style="top:60%; left:63%;"></button>
          <button class="table-hotspot" data-table="6" style="top:58%; left:88%;"></button>
        </div>
      </div>

      <!-- ANGLE 2 â€” tables 17, 19 -->
      <div class="vt-panel" id="view-angle2">
        <div class="vt-img-wrap">
          <img src="assets/angles/angle-2-tables-17-19.png"
               alt="Restaurant view with tables 17 and 19">
          <button class="table-hotspot" data-table="17" style="top:60%; left:35%;"></button>
          <button class="table-hotspot" data-table="19" style="top:60%; left:65%;"></button>
        </div>
      </div>

      <!-- ANGLE 3 â€” tables 17, 18 -->
      <div class="vt-panel" id="view-angle3">
        <div class="vt-img-wrap">
          <img src="assets/angles/angle-3-tables-17-18.png"
               alt="Restaurant view with tables 17 and 18">
          <button class="table-hotspot" data-table="17" style="top:60%; left:37%;"></button>
          <button class="table-hotspot" data-table="18" style="top:60%; left:66%;"></button>
        </div>
      </div>

      <!-- ANGLE 4 â€” tables 21, 22 -->
      <div class="vt-panel" id="view-angle4">
        <div class="vt-img-wrap">
          <img src="assets/angles/angle-4-tables-21-22.png"
               alt="Restaurant view with tables 21 and 22">
          <button class="table-hotspot" data-table="21" style="top:60%; left:36%;"></button>
          <button class="table-hotspot" data-table="22" style="top:60%; left:66%;"></button>
        </div>
      </div>
    </div>

    <!-- Tabs at the bottom of the image -->
    <div class="vt-tabs">
      <button class="vt-tab active" data-target="view-360">360Â° View</button>
      <button class="vt-tab" data-target="view-angle1">Angle 1 â€” Tables 1, 2, 6</button>
      <button class="vt-tab" data-target="view-angle2">Angle 2 â€” Tables 17, 19</button>
      <button class="vt-tab" data-target="view-angle3">Angle 3 â€” Tables 17, 18</button>
      <button class="vt-tab" data-target="view-angle4">Angle 4 â€” Tables 21, 22</button>
    </div>
  </div>
</main>

<footer class="footer">
  <p>Â© 2025 Palmis | Caribbean Restaurant Concept</p>
</footer>

<!-- Language selector -->
<script>
  (function(){
    const flagMap = { en:'gb', fr:'fr', pl:'pl', es:'es' };
    const btn   = document.getElementById('lang-btn');
    const menu  = document.getElementById('lang-menu');
    const flag  = document.getElementById('lang-flag');
    const code  = document.getElementById('lang-code');

    const getLang = () => {
      const parts = location.pathname.split('/').filter(Boolean);
      return ['en','fr','pl','es'].includes(parts[0]) ? parts[0] : 'en';
    };
    const getPage = () => (location.pathname.split('/').pop() || 'inside.html');
    const buildUrl = (targetLang) => {
      const cur = getLang(), page = getPage();
      if (cur === 'en') return targetLang === 'en' ? page : `${targetLang}/${page}`;
      if (targetLang === 'en') return `../${page}`;
      if (targetLang === cur)  return page;
      return `../${targetLang}/${page}`;
    };

    function syncUI(){
      const cur = getLang();
      flag.className = `fi fi-${flagMap[cur]}`;
      code.textContent = cur.toUpperCase();
    }

    btn.addEventListener('click', (e)=>{
      e.stopPropagation();
      menu.hidden = !menu.hidden;
    });

    menu.addEventListener('click', (e)=>{
      const li = e.target.closest('li[data-lang]');
      if(!li) return;
      const lang = li.dataset.lang;
      location.href = buildUrl(lang);
    });

    document.addEventListener('click', (e)=>{
      if(!menu.hidden && !btn.contains(e.target) && !menu.contains(e.target)){
        menu.hidden = true;
      }
    });

    syncUI();
  })();
</script>

<!-- Hamburger / mobile nav -->
<script>
  (function(){
    const header = document.querySelector('.header');
    const toggle = document.querySelector('.nav-toggle');
    if (!header || !toggle) return;

    toggle.addEventListener('click', function () {
      const open = header.classList.toggle('menu-open');
      toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
    });
  })();
</script>

<!-- Tabs + hotspots + 360 table 5 -->
<script>
  // Tabs
  (function(){
    const tabs   = document.querySelectorAll('.vt-tab');
    const panels = document.querySelectorAll('.vt-panel');

    tabs.forEach(tab=>{
      tab.addEventListener('click', ()=>{
        const targetId = tab.dataset.target;
        tabs.forEach(t => t.classList.toggle('active', t === tab));
        panels.forEach(p => p.classList.toggle('active', p.id === targetId));
      });
    });
  })();

  // Angle hotspots -> reserve.html?table=XX
  (function(){
    const hotspots = document.querySelectorAll('.table-hotspot');
    hotspots.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const table = btn.getAttribute('data-table');
        if (!table) return;
        window.location.href = 'reserve.html?table=' + encodeURIComponent(table);
      });
    });
  })();

  // 360 table 5
  window.addEventListener('load', function () {
    const table5 = document.querySelector('#table5-hotspot');
    if (table5) {
      table5.addEventListener('click', function () {
        window.location.href = 'reserve.html?table=5';
      });
    }
  });
</script>

</body>
</html>
